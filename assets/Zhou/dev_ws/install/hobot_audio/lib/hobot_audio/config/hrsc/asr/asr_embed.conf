[ASR_COMMAND]
LOG_PATH      = /log
LOG_FILE      = decoder_api.log
LOG_LEVEL     = 1
SAVE_LOG_FILE = 1
LOG_SIZE      = 40000000
THREAD_NUM    = 1
MAX_AUDIO_LEN = 10000000
PACK_SIZE     = 1600

#MOD_VAD_DIR = asr_embed_conf
#MOD_VAD_CONF = nnvad.conf
#MOD_VAD_RESULT_DIR = vad_result

#FAFLAG       = 1 ###for debug


[DECODER_API]
CONF_PATH        = conf
AMS_CONF         = ams.conf
FRONTEND_CONF    = frontend.conf
DYNAMICWFST_CONF = decoder_core.conf

ARCGRAPH_NAME    = graph_v0.9/grammar.resource.grm.RecoGrf             
VOCAB_NAME       = graph_v0.9/grammar.resource.grm.RecoVoc             
RES_TYPE         = 1                                                      
LM_NAME          = graph_v0.9/grammar.resource.grm.lmInfo              
UNILA_NAME       = graph_v0.9/grammar.resource.wdclass.unigramla       
BILA_NAME        = graph_v0.9/grammar.resource.wdclass.bigramla        
HAVELA_INFO      = graph_v0.9/grammar.resource.nd.ifhave.Unibigramla   
GRFND_INFO       = graph_v0.9/grammar.resource.grm.RecogNdinfo


LM_TYPE          = 0
LM_WEIGHT        = 2.0
LM_PENALTY       = 0.3
LINK_TO_START    = 0
MAX_FRAME_NUM_PROCESS_ONETIME = 20
DOMAIN_LM_WEIGHT = 0.0
NGRAM_INTER_WEIGHT = 0.9
DYNAMIC_LM         = 0
DYNAMIC_LM_CACHE_SIZE   = 500
DYNAMIC_LM_WEIGHT       = 0.45

MXNET_MEANVAR    = am_model/state/decode.meanvar.ctc.1.0

DECODER_EOS_TYPE = 0
# for cmd hotword
SOCKET_PROB_MAP = socket_prob_map
STATE_CLUSTER_FILE = sy_map_new
RN_CONF = rn.conf
RESULT_JSON = 1 #for json format result
FILLTER_WORD_FILE = fillter_word_file
MULTI_PRON_WORD = multi_pron_word.txt
#USER_WORD_FILE = hotword.json.common_misrec
FILTER_HOTWORD_FILE = hotword.json.filter

[AMS]
MAX_FRAME_NUM           = 1500
MIN_FRAME_NUM           = 20
MAX_PRE_CALC_NUM        = 8
MAX_WAV_LEN             = 3000000
HMM_SP_NAME             = SP
HMM_SIL_NAME            = SIL
SIL_SP_STATES           = 0  # 0:1:2
BLANK_ID                = 1909
AM_SOFTMAX_SCALE        = 2.8
ACOUSTIC_SKIP           = 2
ACOUSTIC_EXPAND_SKIP    = 0
AM_NAME                 = am_model                                                 
CTC_FRAME_PAD           = 10

# AM state
MODEL_TYPE              = 3
AM_HBM_FILE             = am_model/state/am_model.hbm_2.0_j3_hbdk3.26.8
DNN_BATCHSIZE           = 3
DNN_FRAME_OVERLAP       = 2
DNN_FRAME_OVERLAP_BACKWARD = 2
EXCHANGE_CW_TO_WC       = 0
EXCHANGE_HC_TO_CH       = 1
INIT_STATE_FILE         = am_model/state/states.txt_2.0_j3_hbdk3.26.8

#RECORD_WAV_ROOT_DIR = ./
RECORD_WAV          = 0  #save input data
BLSTM_DECODER_DELAY = 5

# For feature
FRAME_LENGTH        = 25
FRAME_SHIFT         = 10
FBANK_BIN_NUM       = 80
FEAT_DELTA_ORDER    = 2
#DEC_PROB_THRESH     = 0.1
SIL_THRESH          = 1.5


[DECODER_CORE]
NBEST_REC               = 1
EXTEND_BESTTOKEN_FIRST  = 1
EXTEND_ALL_WETOKEN      = 1
BACK_TRACE_FROM_SIL     = 0
PRUNE_BEAM_IN_TOKENSET  = 20.0
GLOBAL_PRUNE_BEAM       = 30 ##30
WORDEND_BEAM            = 30 ##30
WORD_INSERT_PENALTY     = 2.0
SELF_TRANSPROB          = 0.2
MAX_ACTTIVE_TOKEN       = 100 ## 600
MAX_WORDEND_NUM         = 50 ## 400
LMLA_TREE_NUM           = 1000
ADAPT_DECODE            = 0
STATE_JUMP_PENALTY      = 0.0
BEAM_TRUE_WORDEND       = 50.0 ## 50
MAX_TRUE_WORDEND        = 100 ## 100
PRUNE_GLOBAL_BEAM       = 0.9
PRUNE_ACTTIVE_TOKEN     = 0.6
AMLA_BEAM               = 200 ##180 ## 200
ADJCENT_STATE_BEAM      = 15.0 ##90.0 ## 15
STATE_EXPANSION_BEAM    = 10.0 ##60.0 ## 10
#AVERAGE_FAST           = 0,100,0.8
DECODER_SKIP_WITH_AM    = 1
MIDRET_SIL_FRAMES       = 20
FINISH_SIL_FRAMES       = 120
#LEX_PRONUN_FILE         = lm/sum.dict
GEN_STATE_ALIGN         = 1

#AMMAPPING_FILE         = AMMaping.bin
LOGFILE_TOKEN_EXTEND    = ./log_tokenExtend.txt
LOGFILE_BESTPATH        = ./log_BestPath.txt
#STATE_SEQUENCE         = ./temp.txt

HOT_WORD_LA_SCORE  = -3
MIN_CUSTOM_WAKEUP_LM_PROB = -2.5
MIN_COMMAND_LM_PROB = -5
ACSCORE_BEAM   = 30
LM_HIST_SHRINK_THRESH = 10
WID_BEAM_SHRINK_SCALE = 0.15
OBV_SHRINK_THRESH = 20
OBV_SHRINK_NBEST = 5
OBV_SHRINK_SCALE = 0.1
MAX_LM_PROB_CACHE1 = 18
MAX_LM_PROB_CACHE2 = 11
HOTWORD_COMPENSATION_SCALE = 0.8
NO_WAKEUP_CONFIDENCE_THRESH = 0.4
CWAKEUP_CONFIDENCE_THRESH = 0.4

[FIRST_DECODE_NNLM]
BATCH_SIZE              = 1
PRUNE_IN_ARC            = 1
MODEL_TYPE              = 2
VIEW_SIZE               = 15
#DICT_FILE               = lm_model/model_3112_20211223/pplm.dict.5.2w.lse.v2
#LM_HBM_FILE             = lm_model/model_3112_20211223/lm_model.hbm
#LM_NAME                 = lm_model
#INPUT_EMB_FILE          = lm_model/model_3112_20211223/LM_tcn-mbnce-shared_sbtt_layer3_act_1024-32_lr0.3_norm5_wtbn_20211027102912_20211214202242-wo-bn-b8bit_20211223093112-0004.params_embed
#OUTPUT_EMB_FILE         = lm_model/model_3112_20211223/LM_tcn-mbnce-shared_sbtt_layer3_act_1024-32_lr0.3_norm5_wtbn_20211027102912_20211214202242-wo-bn-b8bit_20211223093112-0004.params_embed

[RN]              
OPEN_PUNC            = 0
USE_PAUSE            = 0
PAUSE_THRESH         = 120
PUNC_LABEL_DICT_FILE = punc/punc.dict.txt.gbk

# tianya&tieba <eos><sos> as seperator
PUNC_DICT_FILE     = punc/viewsize35.l22r12.tytb/dict.txt.v2.gbk
LEFT_CONTEXT_SIZE  = 22
RIGHT_CONTEXT_SIZE = 12
PUNC_HBM_FILE      = punc/viewsize35.l22r12.tytb/punc.hbm
PUNC_EMB_FILE      = punc/viewsize35.l22r12.tytb/TCN_FOC_preConv2_lev4_tytbDict2_l22r12_emb768_validSeq128_batch256_lr0.2_adaGrad_focalGamma2.0_embDrop0.01_tcnDrop0.01_20200218140253-wo-bn-b8bit_20200219213241-0001.params_embed


